<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="blog">
<meta property="og:url" content="http://tcking.github.io/index.html">
<meta property="og:site_name" content="blog">
<meta property="og:description" content="blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="blog">
<meta name="twitter:description" content="blog">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">blog home</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            標籤
          </a>
        </li>
      

      
      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">

    

    
    
      
      
        
        
        
      

      
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/25/blog-whith-hexo/" itemprop="url">
                  blog whith hexo
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2016-02-25T15:32:07+08:00" content="2016-02-25">
              2016-02-25
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>虽然写的少，但是看到好的东西就长了草，了解了下<a href="https://hexo.io/" target="_blank" rel="external">hexo</a>,觉得比Jekyll要便捷多了，至少hexo这个单词比Jekyll好拼写，以下是搭建和迁移过程：</p>
<p>#搭建</p>
<h2 id="安装nodejs和git-（hexo基于nodejs）"><a href="#安装nodejs和git-（hexo基于nodejs）" class="headerlink" title="安装nodejs和git （hexo基于nodejs）"></a>安装nodejs和git （hexo基于nodejs）</h2><p>1.通过nvm安装nodejs(nvm是node的版本管理，可以安装和切换不同版本的nodejs)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.<span class="number">31.0</span>/install.sh | bash </span><br><span class="line">$ nvm install <span class="number">5.7</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>2.通过brew安装git: <code>brew install git</code></p>
<h2 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<h2 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir blog</span><br><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ hexo init</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<h2 id="修改配置说明"><a href="#修改配置说明" class="headerlink" title="修改配置说明"></a>修改配置<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">说明</a></h2><p>编辑_config.yml填写Site和URL部分,theme修改为next</p>
<h2 id="选择模板"><a href="#选择模板" class="headerlink" title="选择模板"></a>选择模板</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>
<p>编辑_config.yml,theme修改为next</p>
<h2 id="安装hexo-server-用于本地浏览"><a href="#安装hexo-server-用于本地浏览" class="headerlink" title="安装hexo server(用于本地浏览)"></a>安装hexo server(用于本地浏览)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-server --save</span><br></pre></td></tr></table></figure>
<h2 id="安装部署工具-用于将静态文件push到github等"><a href="#安装部署工具-用于将静态文件push到github等" class="headerlink" title="安装部署工具(用于将静态文件push到github等)"></a>安装部署工具(用于将静态文件push到github等)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>编辑_config.yml:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deploy:&#10;  type: git&#10;  repo: git@github.com:tcking/tcking.github.io.git&#10;  branch: master&#10;  message:</span><br></pre></td></tr></table></figure></p>
<h2 id="迁移（from-Jekyll）"><a href="#迁移（from-Jekyll）" class="headerlink" title="迁移（from Jekyll）"></a>迁移（from Jekyll）</h2><p>1.将原目录_posts中的md文件拷贝到source/_posts目录中<br>2.编辑_config.yml,new_post_name的值修改为 <code>:year-:month-:day-:title.md</code></p>
<p>#写作流程</p>
<ol>
<li><p>创建blog</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ hexo server</span><br><span class="line">$ hexo new <span class="string">"myblog"</span> //<span class="keyword">then</span> edit the new file</span><br></pre></td></tr></table></figure>
</li>
<li><p>浏览localhost:4000</p>
</li>
<li>Press Ctrl+C to stop</li>
<li><code>$ hexo generate</code> //生成html</li>
<li><code>$ hexo deploy</code> //push到github</li>
</ol>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/24/middle-summarize/" itemprop="url">
                  年中总结&所想
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-06-24T00:00:00+08:00" content="2015-06-24">
              2015-06-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/think/" itemprop="url" rel="index">
                    <span itemprop="name">think</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="先说问题："><a href="#先说问题：" class="headerlink" title="先说问题："></a>先说问题：</h1><p>从春节到年中，发布的版本不多，真正更新到用户手上的新功能更少，但是这种状态下的版本发布也不能做到从容应对，需要加班，这暴露我们些问题。</p>
<p>1.自测能力弱</p>
<p>经过自己的测试后，测试team总能再发现些低级的bug，总结下原因，首先测试方法不对，自测现在是盲测，在脑子里没有设计好覆盖变动逻辑的测试场景，测试覆盖不全面。其次是心态不对，就像考试完后不想再检查，急于交卷。目前我们也在改进这块，提升测试环节在开发流程中得重要性，在新版本计划时，在asana中先创建测试任务，记录要测试的场景，在后继的开发过程中不断补充完善，测试任务分配到人；必做三类测试“升级”，“全新”和“登出再登录”；落实好code review。</p>
<p>2.team之间协同低效</p>
<p>对业务的整体流程不清楚，还有只关心自己的一亩三分地的思想造成了这些问题，同一个逻辑范围上的数据因为不同的人负责，接口也被切分开来。wiki不知道怎么用，要查一个api，首先要想想它属于哪个模块，是人脉？还是电商？还是其他，每个team放的地方，格式都不一样，还有没更新的，就像大海捞针。每个人都应要有主人翁精神，这些问题除了做好自己的工作，能做的不多。</p>
<h1 id="再说需要坚持的："><a href="#再说需要坚持的：" class="headerlink" title="再说需要坚持的："></a>再说需要坚持的：</h1><p>1.坚持做code review</p>
<p>code review是今年春节后作为每次版本发布的一个任务，team的每个人都必须对git上checkout下来的代码review一遍，这样的好处有很多，首先是熟悉了别人的代码和逻辑，更重要的是能提前发现逻辑问题和性能问题，还能重构优化代码，我统计了下除了赶时间写功能赶发布做的比较粗糙，其他时间code review我们都做的比较好，每次review后几乎都能对代码做一些改进。</p>
<p>2.用好工具，多分享</p>
<p>从ADT转向android studio，所有任务上asana，这些工具真得很好用，我们也开了好几次分享小会，提升技能，提升工作效率，更是种快乐。</p>
<h1 id="从局内人看JF："><a href="#从局内人看JF：" class="headerlink" title="从局内人看JF："></a>从局内人看JF：</h1><p>看到的还是问题，而且还很严重，协同低效的不仅仅是各team，更是个JF内部各系统之间调用问题，各系统之间直接调用，缺乏一个以事件驱动连接各系统的框架。</p>
<h1 id="从局外人看JF："><a href="#从局外人看JF：" class="headerlink" title="从局外人看JF："></a>从局外人看JF：</h1><p>提一个我认为可以改进的地方。收取10%手续费？平台照样收，但可以换个说法。平台连接得是发包商和开发者，缺少任何一方都不行，但是这两方却有不同的特点，发包方发包是一种“刚性”需求，发包商目标不是发包而是为了解决自己的问题，可能通过其他商业公司，上JF平台等来满足自己的需求，至于谁来接包则是一个选择过程，他总会想办法满足自己的需求，所以类似于“刚性”；开发者接包，是“改善型”需求，开发者只有觉得价钱合适才会去选择接包，不合适宁愿闲着（鉴于实际情况，有能力的接包者基本上没有什么闲得时间），所以愿意接包得比例应该不是很大。另外在从人的心理来分析，接包人接到100块的单，实际收到的是90块，从这样看平台10%的手续费就是从开发者身上扣除，会给开发者造成抵触。何不在需求市场的报价就是接包者净得？就好比之前看到一个故事，一家自助餐厅对严重浪费食物的客人罚款10元，结果有客人抵触，后来改为就餐价格上涨10元，对没有浪费的客人奖励10元，客人们都能接受；很多人买东西只买降价了多少，对原来是多少可能并不在意，这是种普遍心理现象，接包者接到90得包和接到100得包其实感觉是差不太多的，但是从100里面再扣除10快，虽然收入都是90块，但是给人的心理感受是不一样。发包商是公司，开发者是个人，开发者是传统意义上的弱者，保护弱者符合一般认知，所以平台应该采用在线上迎合开发者，线下迎合发包商这样的策略。</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/12/giraffe/" itemprop="url">
                  让android开发更轻松些
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-06-12T00:00:00+08:00" content="2015-06-12">
              2015-06-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/skill/" itemprop="url" rel="index">
                    <span itemprop="name">skill</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>android开发是件体力活，我们都需要花大量的时间去堆砌跟业务无关的代码，例如拍照，获取照片，处理照片大小，各线程之间的交互等，这些问题都有优秀的方案来解决，Giraffe是将这些优秀的东西集合和组织起来，成为一个快速搭建android app的脚手架，让“卓码”将更多的精力放到业务的处理上。</p>
<p><img src="/assets/img/giraffe-cartoon-mascot-character-vector-1337950.jpg" alt="giraffe"></p>
<p><em>照片来自<a href="http://www.vectorstock.com/royalty-free-vector/giraffe-cartoon-mascot-character-vector-1337950" target="_blank" rel="external">vectorstock</a></em></p>
<h1 id="依赖关系"><a href="#依赖关系" class="headerlink" title="依赖关系"></a>依赖关系</h1><p><hr><br>原则上app/libs下不放置任何jar包，所有的第三方jar统一放到:commonlib中，其他module则在依赖commonlib</p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p><hr><br>约定优于配置，giraffe在启动的时候会去加载<code>assets/config.properties</code>中的配置,配置采用<a href="https://github.com/tcking/PlaceHolderProperties" target="_blank" rel="external"><strong>PlaceHolderProperties</strong></a>支持placeHolder,例如:<br><br><code>images=${app_home}/images</code></p>
<ul>
<li><p><strong>model分隔不同环境的配置</strong><br>配置项model用于指定当前的配置的环境是什么，例如dev，test或production，其他的配置项通过model前缀来区别不同环境的配置，例如:<br><pre><br>dev.openAPIServer=<a href="http://dev.myhost.com" target="_blank" rel="external">http://dev.myhost.com</a> #表示dev的配置<br>production.openAPIServer=<a href="http://wwww.myhost.com" target="_blank" rel="external">http://wwww.myhost.com</a> #表示生产的环境配置<br></pre><br>而这些配置项可以写在一个文件中，通过修改mode来快速切换配置</p>
</li>
<li><p><strong>日志配置</strong><br>日志参考sl4j的思想，支持参数化，例如：<code>Log.e(“get user detail error:{}”,userId,exception)</code> 日志记录采用<a href="http://microlog.sourceforge.net/site/" target="_blank" rel="external"><strong>Microlog</strong></a>,支持选择输出到logcat或文件，日志记录格式可配置</p>
</li>
</ul>
<pre>
%P 日志级别
%t 当前线程名称
%d 当前时间
%m 日志消息
%T Throwable对象
</pre>

<h1 id="基础组件"><a href="#基础组件" class="headerlink" title="基础组件"></a>基础组件</h1><hr>

<ul>
<li><p><strong>1.日志</strong><br>支持参数化（只有在日志打印的时候字符串才进行拼接，性能更好）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Log.d(<span class="string">"hello &#123;&#125;,hello &#123;&#125;"</span>,<span class="string">"world"</span>,<span class="string">"giraffe"</span>);</span><br><span class="line">Log.e(<span class="string">"parameter a=&#123;&#125;,b=&#123;&#125;,c=&#123;&#125;"</span>,<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,exception);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>2.DAO</strong><br>DAO采用<a href="https://github.com/greenrobot/greenDAO" target="_blank" rel="external"><strong>greenDAO</strong></a>，修改module dao下的<code>DAOGenerator</code>，再运行DAOGenerator的main方法在模块app下生产对应的POJO和DAO文件</p>
<ul>
<li>获取DAO对象，<br><code>DBManager.getInstance(“tc”).getDaoSession().getXDAO()</code> , DBManager根据数据库名称（一般以用户来区别）来创建或打开数据库并获取DAO对象</li>
<li>数据库结构和数据的升级，需要编写实现逻辑并注册到升级管理器，DBManager在打开数据库的时候将根据版本号一次执行升级：<ol>
<li>编写实现了DBUpgrader接口的实现类，完成数据库的升级逻辑</li>
<li>修改<code>DBUpgradeManager.registerUpgraders</code>方法，将第一步的实现类注册到升级管理器</li>
</ol>
</li>
</ul>
</li>
<li><p><strong>3.DeviceManager</strong> 获取设备相关的信息，例如网络状态，类型，IMEI，屏幕像素，分辨率，px和dp的相互转换等。</p>
</li>
</ul>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/06/becareful-dogmatism/" itemprop="url">
                  警惕教条主义
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-06-06T00:00:00+08:00" content="2015-06-06">
              2015-06-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/think/" itemprop="url" rel="index">
                    <span itemprop="name">think</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>产品设计在遇到投资人或者老板等这些重量级用户的需求时，一般都会不遗余力的去满足，更有可能会把重量级用户的观点当成指导思想，结果是当时大家都很happy，投资人高兴了，下面的人跟着高兴。但是这样真的是对的吗？<br>这些重量级用户的阅历，经验比一般的用户都丰富，也更具指导意义，但是产品设计仍然需要分析，挖掘其真正的需求，首先任何用户在提出意见的时候可能只局限在他当时思考的范围内，没有把整个系统结合起来考虑。用户说要往东，他真正想做的可能是去美国，所以我们需要加工分析这些原始的需求，不要以屁股决定脑袋这类思想为教条，虽然这是一种现实和无奈，但我们心里需有明镜。 </p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/01/anr/" itemprop="url">
                  错用synchronized引起的ANR
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-06-01T00:00:00+08:00" content="2015-06-01">
              2015-06-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/skill/" itemprop="url" rel="index">
                    <span itemprop="name">skill</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>合并代码后，app在登录后的一段时间偶尔会出现UI卡顿，多次尝试后发现在网络不佳的情况下更容易出现。<br>打开app的StrictMode开关，记录网络，磁盘的读写情况，通过日志并没有发现问题所在，在主线程中除记录了日志和读取几次数据库外并没有额外的操作。<br>如果有系统的anr日志就好定位了，从这个思路出发，想办法弄一个anr出来，在一台机器上弄个热点，app链接上之后，登录完成后的瞬间拔掉机器的网线，此时app的wifi链接正常，但是所有的请求都会阻塞一段时间，此办法简单有效，app出现了anr，抓取系统的anr日志：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost:~ tc$ adb pull /data/anr/traces.txt /Users/tc/work/tmp</span><br></pre></td></tr></table></figure>
<p>在日志的前面几行就发现主线程在等待一个锁<br>waiting to lock <0x423e5780> … held by tid=41 (pool-1-thread-4)</0x423e5780></p>
<p>通过日志还原anr的过程：worker线程首先调用了m对象上的方法B，应为是synchronized方法，因此获取了m对象上的锁，一直等待网络请求完成。之后主线程也调用了m对象上的方法A，A也是synchronized的，这是它获取不到锁，一直等待B调用完成。</p>
<p>问题的原因是两个不相干的业务方法，使用了同一个锁来同步，就是当前实例对象，因为synchronized使用this来进行同步，所以在使用synchronized要特别注意，在已有类中添加synchronized方法时更需要注意搜索此类中是否已存在并判断是否符合业务逻辑，如果是多人协作的类，尽量使用本方法才使用的对象进行同步，另外编码的时候还需要考虑业务场景，有些并发可能只是我们自己的想象而已，在业务中是不存在的也就不需要进行同步。</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/26/my-jf/" itemprop="url">
                  在jf
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-03-26T00:00:00+08:00" content="2015-03-26">
              2015-03-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/think/" itemprop="url" rel="index">
                    <span itemprop="name">think</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>历程 </p>
<p>加入一年多，当时在做r1，领导找到我说要做移动端，安卓和ios都要做，问我想不想负责安卓移动，不过目前就我一人团队要自己找，我犹豫了一会答应了，当时的主要想的有些什么困难，自己不会，没人。这些困难都能克服，不懂可以学，没人可以招，而且我自己比较认同jf的理念想，也想转移动互联方面，这是个机会，也就没多想了<br>刚开始的压力是最大的，要做出一个东西给领导看，自己要学，还要招人，面试，有段时间晚上失眠，想工作上的事情。 </p>
<p>不一样</p>
<p>心态的不一样，到jf是自己想把整个事情做好，当做自己的事业去做，而不是任务，看事情，做事情想的更远。<br>节奏不一样，相比之前更快更敏捷，原来在r1主要面向传统行业，采用瀑布模型，新的东西要经历调研，设计，评审的逐步过程，一次夸一大步，现在是小步快跑，快速试错，快速调整<br>技能不一样，更靠近前沿，我们用到了大量的来源代码，也准备把我们自己认为有价值的东西开源出来，也使用了些新的工具，包括代码层面和协作方面的，例如我们team使用了assana，能大大提高协作效率，我们也多次推荐给兄弟team用，这些都是在快节奏中倒逼出来的，逼着自己去提高效率。 </p>
<p>如何看jf </p>
<p>以复用人的方式复用代码，我觉得jf找到了行业的痛点，很认同这个观点，而且公司很多业务到放到jf中完成，这就给了jf一个初速度，可以走的更快，可以说成功是必然，失败是偶然，整体思路是对的，jf目前更要专注细节，开发和改进更易用，高性能的系统来支撑jf的运转 </p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/01/dirty/" itemprop="url">
                  脏的不只是空气，更是人心
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-03-01T00:00:00+08:00" content="2015-03-01">
              2015-03-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/think/" itemprop="url" rel="index">
                    <span itemprop="name">think</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>新闻和朋友圈都是《穹顶之下》的消息，认真的看了两遍，发现要clean的不仅仅是呼吸的空气，还有这幼稚的体制;<br>震撼，里面的数据让人震撼，3亿吨煤，20亿给一亏损钢铁企业的补助，油老大的垄断和自负;<br>无奈，神奇的相关部门的每个人都心知肚明，就算有志之人，又能奈何，所有一切服务于财政，所谓的法律就是个笑话;<br>感动，这样一个调查记录来自个人，更重要的是唤醒了更多的人。<br>思考，法律没有尊严，太多的例外，体制是根源，请还给公民真正的选举权。</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/02/23/mobile-page-dev/" itemprop="url">
                  移动设备上的web页面开发小结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-02-23T00:00:00+08:00" content="2015-02-23">
              2015-02-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/skill/" itemprop="url" rel="index">
                    <span itemprop="name">skill</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>大年初四写了个移动端的页面，当时css的东西都忘记的差不多了，很久不去用的东西就会忘记，所以写下来是个好习惯，便于以后快速查询，同时也思路的整理和加强。<br>移动设备上和pc上的不同在于显示的尺寸，现在的移动设备像素密度很高，如果浏览器将css样式中的1px显示为一个物理像素点的话，就会太小看不清。name=”viewport”的meta标签用于指定显示区域的像素宽度，它影响了css中px单位的实际值。</p>
<h1 id="1-设置viewport"><a href="#1-设置viewport" class="headerlink" title="1.设置viewport"></a>1.设置viewport</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span> <span class="attribute">content</span>=<span class="value">"width=device-width, initial-scale=1"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>加上此meta标签后，不管设备的物理分辨率是多少，浏览器会将宽度定义为320px（类似android中的dip），也就是说在css中定义320px的宽度就会占据整个屏幕的宽度。</p>
<h1 id="2-设计图和css数据值之间的关系"><a href="#2-设计图和css数据值之间的关系" class="headerlink" title="2.设计图和css数据值之间的关系"></a>2.设计图和css数据值之间的关系</h1><p>移动设备上网页的设计图的大小一般都是640px，设置了viewport后浏览器的宽度变为320px，因此在效果图上的尺寸都要除以2再写入到css中，包括字体也是一样的。</p>
<h1 id="3-切图的大小"><a href="#3-切图的大小" class="headerlink" title="3.切图的大小"></a>3.切图的大小</h1><p>直接从psd中按原大小切图，不需要缩小一半，因为设置了viewport后浏览器认为宽度为320px，但实际显示的像素点不是320个点，在1080*1920的分辨上，如果css中定义宽度为320px的div的一个背景图片，实际就是满屏要1080个像素点来显示，按psd中按原大小切图，宽度为640px，如果再缩小一半则只有320px，把320px的图片放到1080上显示会发虚，所以图片一般按原大小切，图片作为背景的时候，增加属性<code>backgroud-size:contain</code>，让其自适应容器的大小。</p>
<p>再记下<code>backgroud-size</code>样式，语法为<code>background-size: *px|*%|cover|contain;</code>，如果是px或者%,第一个值表示w，第二个表示h，如果第二个值没有，则表示auto，注意，如果用%则是表示父容器的%（不是图片的%），cover和contain都会保持图片的比例，不同的是cover保证覆盖整个容器，contain保证完全显示出图片</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/13/ImageCroppingView/" itemprop="url">
                  开源ImageCroppingView
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2014-03-13T00:00:00+08:00" content="2014-03-13">
              2014-03-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/skill/" itemprop="url" rel="index">
                    <span itemprop="name">skill</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在<a href="https://github.com/tcking/ImageCroppingView" target="_blank" rel="external">TouchImageView</a>图片缩放滑动的基础上添加剪裁功能，可用于头像设置等。</p>
<p><img src="https://github.com/tcking/ImageCroppingView/raw/master/sample.gif" alt="预览"></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars1.githubusercontent.com/u/2508474?v=3&s=460"
               alt="tcking" />
          <p class="site-author-name" itemprop="name">tcking</p>
          <p class="site-description motion-element" itemprop="description">blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>
          
          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分類</span>
              
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tcking</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  


  



  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  

  
  


</body>
</html>
